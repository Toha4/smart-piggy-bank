# zadanie.md

Техническое задание на проект «Универсальная копилка»

## Рекомендации
1. Общие сведения
- Название проекта: Smart Piggy Bank (Универсальная копилка).
- Назначение: Веб-приложение для отслеживания прогресса накопления на любую финансовую цель. Первоначальный кейс — накопление на Sony PlayStation 5.
- Целевая аудитория: Один пользователь (администратор). Приложение предназначено для использования в локальной сети.
- Архитектура развертывания: Контейнеризация (Docker). Все компоненты (фронтенд, бэкенд, БД) разворачиваются локально. Доступ по локальному IP-адресу/порту.
2. Функциональные требования (Бизнес-логика)
- 2.1. Сущности и данные
	- Цель (Goal):
		- Название цели (например, "PlayStation 5", "Новый ноутбук").
		- Целевая сумма (в рублях).
		- Текущий баланс (рассчитываемый автоматически на основе операций).
		- Опционально: Изображение цели (URL или загрузка файла), срок (дедлайн).
	- Операция (Transaction):
		- Сумма операции (положительное число — пополнение).
		- Дата и время операции (проставляются автоматически при создании).
		- Комментарий (необязательный текст, например, "Аванс", "Подарок").
- 2.2. Сценарии использования (User Stories)
	1. Как пользователь, я хочу видеть главный экран, на котором сразу отображается:
		- Название и изображение моей текущей цели.
		- Текущий прогресс: [Текущий баланс] из [Целевая сумма] руб. и визуальная шкала (прогресс-бар).
		- Кнопку/форму для быстрого пополнения.
	2. Как пользователь, я хочу пополнять копилку, вводя сумму и, при желании, комментарий.
	3. Как пользователь, я хочу просматривать полную историю всех пополнений в виде таблицы (Дата, Сумма, Комментарий) с возможностью:
		- Отредактировать комментарий у любой операции.
		- Удалить ошибочную операцию (при этом баланс цели должен пересчитаться).
	4. Как пользователь, я хочу настраивать цель на отдельной странице, где могу:
		- Изменить название цели.
		- Изменить целевую сумму.
		- Загрузить/изменить изображение.
		- Установить или изменить дедлайн.
		- Сбросить прогресс (обнулить баланс, очистить историю) для начала новой цели.
	5. Как пользователь, я хочу настраивать внешний вид приложения (цветовую тему) на странице настроек.
	6. Как пользователь, я хочу видеть визуальную обратную связь при приближении к цели:
		- При >75% — меняется цвет прогресс-бара (например, на оранжевый).
		- При 100% — меняется цвет прогресс-бара (например, на зеленый), запускается праздничная анимация (конфетти).
3. Нефункциональные требования
- 3.1. Хранение данных:
	- Данные должны сохраняться между перезапусками приложения и сервера.
	- Использование внешней БД (SQLite, PostgreSQL, MongoDB), развертываемой в Docker-контейнере. Отказ от localStorage и облачных БД.
	- Резервное копирование должно обеспечиваться на уровне файлов БД (volume в Docker).
- 3.2. Внешний вид и UX:
	- Чистый, интуитивно понятный минималистичный интерфейс.
	- Адаптивный дизайн для комфортного использования на ПК, планшете и телефоне.
	- Настраиваемая цветовая тема. По умолчанию — нейтральная (светлая/темная). Возможность выбора акцентного цвета в настройках.
- 3.3. Надежность и безопасность:
	- Валидация всех вводимых данных на фронтенде и бэкенде.
	- Защита от SQL-инъекций и базовых уязвимостей.
	- Так как приложение работает в локальной сети и для одного пользователя, система аутентификации не требуется.
4. Архитектурный эскиз (без привязки к конкретному стеку)
1. Frontend (Клиент): SPA (одностраничное приложение). Отвечает за отображение, формы, анимации. Общается с бэкендом по REST API.
2. Backend (Сервер): Принимает запросы от фронтенда, содержит бизнес-логику, работает с базой данных. Предоставляет API.
3. Database (База данных): Отдельный сервис/контейнер. Хранит данные о цели и операциях.
4. Docker / Docker Compose: Объединяет все три компонента, упрощая запуск одной командой.
5. Примерные API-эндпоинты (для проектирования бэкенда)
- GET /api/goal – получить данные о текущей цели (название, сумма, баланс, изображение)
- PUT /api/goal – обновить данные цели
- GET /api/transactions – получить список всех операций
- POST /api/transactions – создать новую операцию (пополнение)
- PUT /api/transactions/:id – отредактировать операцию (комментарий)
- DELETE /api/transactions/:id – удалить операцию
- GET /api/settings/theme – получить настройки темы
- PUT /api/settings/theme – обновить настройки темы
6. Чек-лист этапов разработки (универсальный)
1. Проектирование: Выбор стека технологий на основе ТЗ. Создание схемы БД.
2. Настройка окружения: Создание Dockerfile и docker-compose.yml для бэкенда, БД и, опционально, фронтенда.
3. Бэкенд (Ядро):
	- Создание сервера (Node.js/Express, Python/FastAPI, Go).
	- Подключение к БД (SQLite/Postgres) в контейнере.
	- Реализация всех API-эндпоинтов (см. п.5).
	- Добавление логики пересчета баланса при добавлении/удалении операций.
4. Фронтенд (Интерфейс):
	- Каркас приложения (React/Vue/Svelte + Vite).
	- Верстка главной страницы: GoalCard, ProgressBar, AddFundsForm.
	- Реализация страниц: HistoryPage, SettingsPage.
	- Настройка клиента для работы с API бэкенда (axios, fetch).
5. Динамика и логика:
	- Интеграция прогресс-бара с реальными данными.
	- Реализация логики смены цвета прогресс-бара (75%, 100%).
	- Добавление анимации достижения цели (библиотека canvas-confetti).
6. Тестирование и полировка:
	- Проверка работы в Docker-окружении.
	- Адаптивная верстка.
	- Валидация форм, обработка ошибок сети.
7. Рекомендации по выбору стека
Фронтенд:
- Ядро:React 18 с TypeScript
- Сборка:Vite
- Стили:Tailwind CSS
- Дополнительно:Axios (HTTP), React Router, canvas-confetti (анимация)
Бэкенд:
- Фреймворк:FastAPI (Python 3.11+)
- ORM:SQLAlchemy 2.0
- Валидация:Pydantic 2.0
База данных:
- СУБД:SQLite 3
- Хранение:Файл piggybank.dbв директории проекта
Инфраструктура:
- Контейнеризация:Docker + Docker Compose
- Веб-сервер:Uvicorn (ASGI)
8. Архитектура развертывания
Вариант 1 (Разработка):
- Фронтенд: Vite Dev Server на порту 5173
- Бэкенд: FastAPI на порту 8000
- CORS настроен для кросс-доменных запросов
Вариант 2 (Продакшен):
- Моно-контейнер на FastAPI
- Статические файлы фронтенда (dist/) обслуживаются через app/static/
- Доступ по одному порту (8000)